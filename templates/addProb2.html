<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="{{ url_for('static', filename = 'css/base.css') }}">
    <link rel="stylesheet" href="{{url_for('static', filename = 'css/addProb.css') }}">
    <link rel="stylesheet" href="{{url_for('static', filename = 'css/addProb2.css') }}">

    <link rel="stylesheet" href="{{url_for('static', filename = 'css/misc.css') }}">
    <link rel="icon" href="https://cdn.discordapp.com/attachments/574052228206297090/852681325315096587/AAA.png">
    <!-- Main Quill library -->
    <script src="//cdn.quilljs.com/1.3.6/quill.js"></script>
    <script src="//cdn.quilljs.com/1.3.6/quill.min.js"></script>

    <!-- Theme included stylesheets -->
    <link href="//cdn.quilljs.com/1.3.6/quill.snow.css" rel="stylesheet">
    <link href="//cdn.quilljs.com/1.3.6/quill.bubble.css" rel="stylesheet">


    <script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>

    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/ace/1.4.12/ace.js"></script>
    <script defer type="text/javascript" src="{{url_for('static', filename = 'js/addProb.js') }}"></script>

    <script defer type="text/javascript" src="{{ url_for('static', filename = 'js/select.js') }}"></script>
</head>

<body>
    {% macro with_errors(field) %}
    <div class="form_field">
        {% if field.errors %}
        {% set css_class = 'has_error ' + kwargs.pop('class', '') %}
        {{ field(class=css_class) }}
        <ul class="errors">{% for error in field.errors %}<li>{{ error|e }}</li>{% endfor %}</ul>
        {% else %}
        {{ field(**kwargs) }}
        {% endif %}
    </div>
    {% endmacro %}

    <div id="box">
        <h2>ADD PROBLEM</h3>
            <form method="POST" action="{{ url_for('wally.addProb2')}}">
                {{form.csrf_token}}
                <div id="stepflexbox">

                    <div id="step1" class="stepflex">
                        {{form.author(placeholder="your name (optional)")}}
                        <div id="toolbar"></div>
                        <div id="editor"></div>

                    </div>

                    <div id="step2" style="display:none;">
                        {% for tag in form.tags %}
                        <div class="form-check">
                            {{ tag(class="form-check-input") }}
                            {{ tag.label(class="form-check-label") }}
                        </div>
                        {% endfor %}
                    </div>

                    <div id="steps3to5" class="stepflex" style="display: none;">
                        {{form.code()}}
                        <div class="flexchild">
                            <div id="jsEditor" style="flex-basis: 100%;">def func(input):
                                #please replace func with your function name
                                #and input with a placeholder name for your input
                                #delete this comment afterwards

                            </div>
                            <script type="text/javascript">
                                $(function () {
                                    var editor = ace.edit("jsEditor");
                                    editor.setTheme("ace/theme/monokai");
                                    editor.session.setMode("ace/mode/python");
                                    editor.getSession().on("change", function () {
                                        $('#code').val(editor.getValue());
                                    });
                                });
                            </script>

                        </div>
                        <div class="flexchild" id="step3" style="display:none">
                            <div style="overflow-y: auto; height: 40vh;">
                                <p style="display:inline-block;">Please write at least three test cases. Try to choose
                                    test cases that will clarify your problem.</p>

                                <table>
                                    <tr>
                                        <th>input</th>
                                        <th>output</th>
                                        <th>test</th>
                                    </tr>
                                    <tr>
                                        <td class="inputText tableTestCases">
                                            <textarea style="margin-right: 0; resize: vertical;"></textarea>
                                        </td>
                                        <td class="outputText tableTestCases">
                                            <textarea style="margin-right: 0;resize: vertical;"></textarea>
                                        </td>
                                        <td class="testText tableTestCases">
                                            <div class="plus" id="plus">

                                        </td>

                                    </tr>
                                </table>
                            </div>
                            <p id="error"></p>
                            <input type="hidden" name="function" val="" />
                        </div>

                        <div class="flexchild" id="step4" style="display:none">
                            <div style="overflow-y: auto; height: 40vh;">
                                <p style="display:inline-block;">
                                    Optional step: provide test inputs that people will use in order to predict the
                                    output of your function.
                                </p>

                                <table>
                                    <tr>
                                        <th>input</th>
                                        <th>test</th>
                                    </tr>
                                    <tr>
                                        <td class="inputText tableTestInput">
                                            <textarea style="margin-right: 0; resize: vertical;"></textarea>
                                        </td>

                                        <td class="testText tableTestInput">
                                            <div class="plus" id="plus">

                                        </td>

                                    </tr>
                                </table>
                            </div>
                            <p id="error"></p>
                            <input type="hidden" name="function" val="" />
                        </div>
                        <div class="flexchild" id="step5" style="display:none">
                            <div style="overflow-y: auto; height: 40vh;">
                                <p style="display:inline-block;">
                                    Optional step: provide test outputs that people will use in order to predict
                                    possible inputs of your function.
                                </p>
                                <table>
                                    <tr>
                                        <th>output</th>
                                        <th>test</th>
                                    </tr>
                                    <tr>
                                        <td class="outputText tableTestOutput">
                                            <textarea style="margin-right: 0;resize: vertical;"></textarea>
                                        </td>
                                        <td class="testText tableTestOutput">
                                            <div class="plus" id="plus">

                                        </td>

                                    </tr>
                                </table>
                            </div>
                            <p id="error"></p>
                            <input type="hidden" name="function" val="" />
                        </div>
                    </div>

                    <div id="step6" class="stepflex" style="display: none;">
                        {{form.buggyCode()}}
                        <div id = "buggyEditor" style="flex-basis: 100%;">def func(input):
                            #please replace func with your function name
                            #and input with a placeholder name for your input
                            #delete this comment afterwards

                        </div>
                        <script type="text/javascript">
                            $(function () {
                                var editor = ace.edit("buggyEditor");
                                editor.setTheme("ace/theme/monokai");
                                editor.session.setMode("ace/mode/python");
                                editor.getSession().on("change", function () {
                                    $('#buggycode').val(editor.getValue());
                                });
                            });
                        </script>
                    </div>
                    <div id="step7" class="stepflex" style="display: none;">
                        <input type="submit" value="submit">
                    </div>
                </div>


    </div>
    <span id="paginator">
        <a href="#" class="previous round">&#8249;</a>
        <p id="pgnum" style="display:inline-block">1/9</p>
        <a href="#" class="next round">&#8250;</a>
    </span>
    </form>
    </div>

</body>

</html>